<!DOCTYPE html>

<html>
  <head>
    <title>accel</title>
  </head>
  <body>
    <button onclick="permission_request();">動作と方向へのアクセス許可</button>

    <script>
      function post_function( result_string ) {
          if ( result_string === "granted" ) {
              // ユーザが許可した場合、文字列"granted"が返る
          }
          else if ( result_string === "denied" ) {
      // ユーザが拒否した場合、文字列"denied"が返る
          }
      }
      function permission_request() {
          if ( DeviceOrientationEvent
              && DeviceOrientationEvent.requestPermission
              && typeof DeviceOrientationEvent.requestPermission === 'function'
          ) {
              DeviceMotionEvent.requestPermission().then( post_function );
              // window.addEventListener( "devicemotion", function(e) {
              //     // 何らかの処理
              // }, false );
          }
          if ( DeviceOrientationEvent
              && DeviceOrientationEvent.requestPermission
              && typeof DeviceOrientationEvent.requestPermission === 'function'
          ) {
              DeviceOrientationEvent.requestPermission().then( postf_unction );
              // window.addEventListener( "deviceorientation", function(e) {
              //     // 何らかの処理
              // }, false );
          }
      }
    </script>
  </body>
</html>


